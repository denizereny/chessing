<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Touch Target Sizing Test - Task 8.1</title>
  <link rel="stylesheet" href="css/responsive-settings-menu.css">
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }
    
    .test-container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    
    .test-section {
      margin-bottom: 30px;
      padding: 20px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
    }
    
    .test-result {
      padding: 10px;
      margin: 10px 0;
      border-radius: 4px;
      font-weight: 500;
    }
    
    .pass {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }
    
    .fail {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }
    
    .info {
      background: #d1ecf1;
      color: #0c5460;
      border: 1px solid #bee5eb;
      margin-bottom: 20px;
    }
    
    .measurement {
      font-family: monospace;
      background: #f8f9fa;
      padding: 2px 6px;
      border-radius: 3px;
    }
    
    h1 {
      color: #333;
      margin-bottom: 10px;
    }
    
    h2 {
      color: #555;
      margin-top: 0;
      font-size: 1.2rem;
    }
    
    .stats {
      display: flex;
      gap: 20px;
      margin-top: 20px;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 6px;
    }
    
    .stat {
      flex: 1;
      text-align: center;
    }
    
    .stat-value {
      font-size: 2rem;
      font-weight: bold;
      color: #4a90e2;
    }
    
    .stat-label {
      font-size: 0.9rem;
      color: #666;
      margin-top: 5px;
    }
  </style>
</head>
<body>
  <div class="test-container">
    <h1>üéØ Touch Target Sizing Test - Task 8.1</h1>
    <div class="info">
      <strong>Requirements:</strong>
      <ul>
        <li>4.1, 4.2: All interactive elements must be at least 44x44px</li>
        <li>4.3: Minimum 8px spacing between interactive elements</li>
      </ul>
    </div>

    <div id="testResults"></div>
    
    <div class="stats">
      <div class="stat">
        <div class="stat-value" id="totalTests">0</div>
        <div class="stat-label">Total Tests</div>
      </div>
      <div class="stat">
        <div class="stat-value" id="passedTests">0</div>
        <div class="stat-label">Passed</div>
      </div>
      <div class="stat">
        <div class="stat-value" id="failedTests">0</div>
        <div class="stat-label">Failed</div>
      </div>
    </div>

    <!-- Test Menu Structure -->
    <div style="display: none;">
      <div class="settings-menu-content" id="testMenu">
        <div class="menu-control-group">
          <button class="menu-control-btn test-button">Test Button 1</button>
        </div>
        <div class="menu-control-group">
          <button class="menu-control-btn test-button">Test Button 2</button>
        </div>
        <div class="menu-control-group">
          <label class="menu-control-label">Test Label</label>
          <select class="menu-control-select test-select">
            <option>Option 1</option>
          </select>
        </div>
        <div class="menu-control-group">
          <input type="text" class="test-input" placeholder="Test Input">
        </div>
      </div>
    </div>
  </div>

  <script>
    // Test configuration
    const MIN_TOUCH_TARGET_SIZE = 44; // pixels
    const MIN_SPACING = 8; // pixels
    
    let totalTests = 0;
    let passedTests = 0;
    let failedTests = 0;
    
    const resultsContainer = document.getElementById('testResults');
    
    function addTestResult(testName, passed, message) {
      totalTests++;
      if (passed) {
        passedTests++;
      } else {
        failedTests++;
      }
      
      const section = document.createElement('div');
      section.className = 'test-section';
      
      const title = document.createElement('h2');
      title.textContent = testName;
      section.appendChild(title);
      
      const result = document.createElement('div');
      result.className = `test-result ${passed ? 'pass' : 'fail'}`;
      result.innerHTML = `${passed ? '‚úÖ' : '‚ùå'} ${message}`;
      section.appendChild(result);
      
      resultsContainer.appendChild(section);
      
      updateStats();
    }
    
    function updateStats() {
      document.getElementById('totalTests').textContent = totalTests;
      document.getElementById('passedTests').textContent = passedTests;
      document.getElementById('failedTests').textContent = failedTests;
    }
    
    function getComputedSize(element) {
      const styles = window.getComputedStyle(element);
      const width = parseFloat(styles.width);
      const height = parseFloat(styles.height);
      return { width, height };
    }
    
    function getSpacing(element1, element2) {
      const rect1 = element1.getBoundingClientRect();
      const rect2 = element2.getBoundingClientRect();
      return rect2.top - rect1.bottom;
    }
    
    // Run tests
    document.addEventListener('DOMContentLoaded', function() {
      // Make test menu visible temporarily for measurements
      const testMenu = document.getElementById('testMenu');
      testMenu.parentElement.style.display = 'block';
      testMenu.parentElement.style.position = 'absolute';
      testMenu.parentElement.style.left = '-9999px';
      
      // Test 1: Button touch target size
      const buttons = testMenu.querySelectorAll('.test-button');
      buttons.forEach((button, index) => {
        const size = getComputedSize(button);
        const passed = size.height >= MIN_TOUCH_TARGET_SIZE;
        addTestResult(
          `Test ${index + 1}: Button Touch Target Size`,
          passed,
          `Button height: <span class="measurement">${size.height.toFixed(2)}px</span> ${passed ? '‚â•' : '<'} ${MIN_TOUCH_TARGET_SIZE}px (Required: ‚â•${MIN_TOUCH_TARGET_SIZE}px)`
        );
      });
      
      // Test 2: Select dropdown touch target size
      const selects = testMenu.querySelectorAll('.test-select');
      selects.forEach((select, index) => {
        const size = getComputedSize(select);
        const passed = size.height >= MIN_TOUCH_TARGET_SIZE;
        addTestResult(
          `Test ${buttons.length + index + 1}: Select Dropdown Touch Target Size`,
          passed,
          `Select height: <span class="measurement">${size.height.toFixed(2)}px</span> ${passed ? '‚â•' : '<'} ${MIN_TOUCH_TARGET_SIZE}px (Required: ‚â•${MIN_TOUCH_TARGET_SIZE}px)`
        );
      });
      
      // Test 3: Input field touch target size
      const inputs = testMenu.querySelectorAll('.test-input');
      inputs.forEach((input, index) => {
        const size = getComputedSize(input);
        const passed = size.height >= MIN_TOUCH_TARGET_SIZE;
        addTestResult(
          `Test ${buttons.length + selects.length + index + 1}: Input Field Touch Target Size`,
          passed,
          `Input height: <span class="measurement">${size.height.toFixed(2)}px</span> ${passed ? '‚â•' : '<'} ${MIN_TOUCH_TARGET_SIZE}px (Required: ‚â•${MIN_TOUCH_TARGET_SIZE}px)`
        );
      });
      
      // Test 4: Spacing between control groups
      const controlGroups = testMenu.querySelectorAll('.menu-control-group');
      for (let i = 0; i < controlGroups.length - 1; i++) {
        const spacing = getSpacing(controlGroups[i], controlGroups[i + 1]);
        const passed = spacing >= MIN_SPACING;
        addTestResult(
          `Test ${buttons.length + selects.length + inputs.length + i + 1}: Spacing Between Control Groups ${i + 1} and ${i + 2}`,
          passed,
          `Spacing: <span class="measurement">${spacing.toFixed(2)}px</span> ${passed ? '‚â•' : '<'} ${MIN_SPACING}px (Required: ‚â•${MIN_SPACING}px)`
        );
      }
      
      // Test 5: Toggle button size
      const toggleButton = document.createElement('button');
      toggleButton.className = 'settings-menu-toggle';
      toggleButton.style.position = 'absolute';
      toggleButton.style.left = '-9999px';
      document.body.appendChild(toggleButton);
      
      const toggleSize = getComputedSize(toggleButton);
      const togglePassed = toggleSize.width >= MIN_TOUCH_TARGET_SIZE && toggleSize.height >= MIN_TOUCH_TARGET_SIZE;
      addTestResult(
        `Test ${totalTests + 1}: Toggle Button Touch Target Size`,
        togglePassed,
        `Toggle button: <span class="measurement">${toggleSize.width.toFixed(2)}px √ó ${toggleSize.height.toFixed(2)}px</span> (Required: ‚â•${MIN_TOUCH_TARGET_SIZE}px √ó ${MIN_TOUCH_TARGET_SIZE}px)`
      );
      
      document.body.removeChild(toggleButton);
      
      // Test 6: Close button size
      const closeButton = document.createElement('button');
      closeButton.className = 'settings-menu-close';
      closeButton.style.position = 'absolute';
      closeButton.style.left = '-9999px';
      document.body.appendChild(closeButton);
      
      const closeSize = getComputedSize(closeButton);
      const closePassed = closeSize.width >= MIN_TOUCH_TARGET_SIZE && closeSize.height >= MIN_TOUCH_TARGET_SIZE;
      addTestResult(
        `Test ${totalTests + 1}: Close Button Touch Target Size`,
        closePassed,
        `Close button: <span class="measurement">${closeSize.width.toFixed(2)}px √ó ${closeSize.height.toFixed(2)}px</span> (Required: ‚â•${MIN_TOUCH_TARGET_SIZE}px √ó ${MIN_TOUCH_TARGET_SIZE}px)`
      );
      
      document.body.removeChild(closeButton);
      
      // Hide test menu
      testMenu.parentElement.style.display = 'none';
      
      // Summary
      const summary = document.createElement('div');
      summary.className = `test-result ${failedTests === 0 ? 'pass' : 'fail'}`;
      summary.innerHTML = `<strong>Summary:</strong> ${passedTests}/${totalTests} tests passed. ${failedTests === 0 ? '‚úÖ All touch target sizing requirements met!' : '‚ùå Some tests failed.'}`;
      resultsContainer.appendChild(summary);
    });
  </script>
</body>
</html>
